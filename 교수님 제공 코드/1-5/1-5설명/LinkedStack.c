// 두근두근 C자료구조(최영규, 생능 출판사, 2024)
// 참고파일 ch05/LinkedStack.c

//-------------------------------------------------------------
// 코드 5.4 연결된 스택의 활용
//-------------------------------------------------------------
/*
 * [프로그램 설명]
 * 이 프로그램은 연결 리스트로 구현된 스택(LinkedStack)의 기본 사용법을 보여주는 예제입니다.
 * 피보나치 수열의 일부를 스택에 저장했다가 꺼내면서 스택의 LIFO(Last-In-First-Out) 특성을 시연합니다.
 */

#include <stdio.h>
#include <stdlib.h>

typedef int Element;       // 스택에 저장할 데이터 타입을 int로 정의
#include "LinkedStack.h"   // 연결 리스트 기반 스택 헤더 파일 포함

//-------------------------------------------------------------
// 코드 5.7 스택 요소를 입력순으로 출력
//-------------------------------------------------------------
/*
 * [스택 출력 함수]
 * 스택의 요소들을 현재 상태 그대로(top부터) 출력하는 함수
 * top에서 시작하여 연결 리스트를 따라가며 데이터를 출력
 */
void print_stack()
{
    for (Node* p = top; p != NULL; p = p->link) {
        printf("%3d", p->data);
    }
}

/*
 * [스택 재귀적 출력 함수]
 * 스택의 요소들을 역순(bottom부터)으로 출력하는 재귀적 함수
 * 재귀 호출을 사용하여 스택의 바닥부터 출력할 수 있음
 * 
 * [동작 과정]
 * 1. 종료 조건: 현재 노드가 NULL이면 종료
 * 2. 다음 노드를 재귀적으로 처리
 * 3. 현재 노드의 데이터 출력
 */
void print_recur(Node* p)
{
    if (p != NULL) {
        print_recur(p->link);    // 재귀적으로 다음 노드 처리
        printf("%3d", p->data);  // 출력은 재귀 호출이 끝난 후에 수행 (역순 출력)
    }
}


void main()
{
    // 피보나치 수열의 처음 7개 숫자로 배열 초기화
    int A[7] = { 0, 1, 1, 2, 3, 5, 8 };

    // 스택 초기화
    init_stack();
    
    // 피보나치 수열을 출력하고 스택에 저장
    printf("스택 테스트\n 입력 데이터: ");
    for (int i = 0; i < 7; i++) {
        printf("%3d", A[i]);    // 현재 값을 출력
        push(A[i]);             // 현재 값을 스택에 저장
    }

    /*
     * [주석 처리된 출력 코드]
     * 아래 코드는 스택의 내용을 두 가지 방법으로 출력하는 예시입니다.
     * 1. print_recur(): 재귀 호출을 사용하여 스택 바닥부터 출력 (입력 순서와 동일)
     * 2. print_stack(): 반복문을 사용하여 스택 top부터 출력 (입력 순서의 역순)
     */
    /*
    printf("\n입력된 순서");
    print_recur(top);
    printf("\n입력반대순서");
    print_stack();
    printf("\n");
    */

    // 스택이 비어있지 않는 동안 데이터를 꺼내어 출력
    printf("\n 출력 데이터: ");
    while (!is_empty())
        printf("%3d", pop());  // 스택에서 하나씩 꺼내어 출력 (LIFO 순서로 출력됨)
    printf("\n");
    
    /*
     * [출력 결과 분석]
     * 입력 데이터:   0  1  1  2  3  5  8  (피보나치 수열 순서)
     * 출력 데이터:   8  5  3  2  1  1  0  (역순으로 출력됨)
     * 
     * 이는 스택의 후입선출(LIFO) 특성을 잘 보여줍니다.
     */

    // 스택 메모리 해제
    destroy_stack();
}
